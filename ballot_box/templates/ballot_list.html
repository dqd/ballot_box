{% extends "base.html" %}
{% block body %}
<div class="row">
  <div class="col-md-12">
    <h3>Seznam voleb a hlasování</h3>
    {% if g.user.can_create_ballot %}
      <p><a href="{{url_for('ballot_new')}}" class="btn btn-primary btn-sm"><i class="fa fa-plus"></i> Nová volba / hlasování</a></p>
    {% endif %}
    <table class="table table-bordered">
      <thead>
        <tr><th>Název</th><th>Popis</th><th>Typ</th><th>Jednotka</th><th>Možnosti</th><th>Trvání</th><th>Stav</th><th>Akce</th></tr>
      </thead>
      <tbody>
        {% for ballot in ballots %}
          <tr>
            <td>{{ballot.name}}</td>
            <td class="pre">{{ballot.description}}</td>
            <td>
              {{ballot.type}}
              {% if ballot.is_yes_no %}
                <i class="fa fa-thumbs-up"></i>/<i class="fa fa-thumbs-down"></i>
              {% else %}
                <i class="fa fa-list-ol"></i>
              {% endif %}

            </td>
            <td>
              {{ballot.unit}}
              {% if ballot.supporters_too %}
                +Př.
              {% endif %}
            </td>
            <td>{{ballot.options|length}}/{{ballot.max_votes}}</td>
            <td>{{ballot.begin_at}} až {{ballot.finish_at}}</td>
            <td>
              {% if ballot.approved %}
                <span class="label label-success">Schváleno</span>
              {% endif %}
              {% if ballot.cancelled %}
                <span class="label label-danger">Zrušeno</span>
              {% endif %}
              {% if not ballot.approved and not ballot.cancelled %}
                <span class="label label-info">Nové</span>
              {% endif %}
            </td>
            <td>
              {% if not ballot.in_time_progress and not ballot.in_time_finished %}
                <a href="{{url_for('ballot_edit', ballot_id=ballot.id)}}" class="btn btn-default btn-xs" title="Upravit"><i class="fa fa-pencil"></i></a>
                <a href="{{url_for('ballot_options', ballot_id=ballot.id)}}" class="btn btn-default btn-xs" title="Možnosti/kandidáti"><i class="fa fa-users"></i></a>
                <a href="{{url_for('ballot_preview', ballot_id=ballot.id)}}" class="btn btn-default btn-xs" title="Náhled hlasovácí místnosti"><i class="fa fa-eye"></i></a>
              {% elif ballot.in_time_progress %}
                Probíhá
              {% elif ballot.in_time_finished %}
                <a href="{{url_for('polling_station_result', ballot_id=ballot.id)}}" class="btn btn-xs btn-default"><i class="fa fa-list-ol"></i> Výsledek</a>
                <a href="{{url_for('ballot_protocol_list', ballot_id=ballot.id)}}" class="btn btn-xs btn-default"><i class="fa fa-file-text-o"></i> Protokol</a>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}